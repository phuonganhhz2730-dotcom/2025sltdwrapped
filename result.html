<script>
const userAnswers = {
  q1: sessionStorage.getItem("q1"),
  q2: sessionStorage.getItem("q2")
};

const questions = {
  q1: {
    title: "Con số gây chấn động shipdom?",
    correct: "A",
    correctText: "A. 3325",
    explain: "Hãy check lại sự kiện bùng nổ này vào concert ATVNCG Day 6 nhé!"
  },
  q2: {
    title: "Điền vào chỗ trống: “Đỉnh ___ với em không?” – “iu ___ hok?”",
    correct: "nhất",
    explain: "Hãy check lại comment của anh Jun Phạm trên Youtube và Threads nhé!”"
  }
};

let score = 0;
let html = "<h2 style='text-align:center'>KẾT QUẢ</h2>";

Object.keys(questions).forEach((key, index) => {
  const q = questions[key];
  const user = (userAnswers[key] || "").toLowerCase();

  const isCorrect =
    key === "q1"
      ? user === q.correct
      : user === q.correct;

  if (isCorrect) score++;

  html += `
    <div style="margin-top:20px;padding:16px;border-radius:14px;
      background:rgba(255,255,255,.06)">
      <b>Câu ${index + 1}:</b> ${q.title}<br>
      ${
        isCorrect
          ? `<p class="good">✔ Bạn trả lời đúng</p>`
          : `
            <p class="bad">✘ Bạn trả lời: <b>${user || "(chưa trả lời)"}</b></p>
            <p>✔ Đáp án đúng: <b>${q.correctText || q.correct}</b></p>
            <p><em>Giải thích: ${q.explain}</em></p>
          `
      }
    </div>
  `;
});

html =
  `<h3 style="text-align:center;margin-bottom:20px">
    Điểm của bạn: ${score}/2
   </h3>` + html;

document.getElementById("out").innerHTML = html;

// FIREWORK / SPARKLE
for (let i = 0; i < 35; i++) {
  const s = document.createElement("div");
  s.className = "sparkle";
  s.style.left = Math.random() * 100 + "vw";
  s.style.animationDuration = 3 + Math.random() * 3 + "s";
  document.body.appendChild(s);
}

// CHUYỂN TRANG
setTimeout(() => {
  window.location.href = "thankyou.html";
}, 5000);
</script>
